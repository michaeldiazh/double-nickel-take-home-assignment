[
  {
    "testName": "building basic select query for application",
    "input": {
      "selectColumns": ["id", "status", "applied_on"],
      "fromTable": "application"
    },
    "expected": {
      "query": "select id, status, applied_on\n    from application",
      "values": []
    }
  },
  {
    "testName": "building select query for application with WHERE clause",
    "input": {
      "selectColumns": ["id", "status", "applied_on"],
      "fromTable": "application",
      "whereClause": [
        {
          "tableName": "application",
          "column": "status",
          "filter": "=",
          "value": "SUBMITTED"
        }
      ]
    },
    "expected": {
      "query": "select id, status, applied_on\n    from application\n    \n    where application.status = $1",
      "values": ["SUBMITTED"]
    }
  },
  {
    "testName": "building select query for application with JOIN to user",
    "input": {
      "selectColumns": ["application.id", "application.status", "user.first_name", "user.email"],
      "fromTable": "application",
      "joinClauses": [
        {
          "joinOperator": "join",
          "sourceTable": "application",
          "targetTable": "user",
          "relationship": [["user_id", "id"]]
        }
      ]
    },
    "expected": {
      "query": "select application.id, application.status, user.first_name, user.email\n    from application\n    join user on application.user_id = user.id",
      "values": []
    }
  },
  {
    "testName": "building select query for application with JOIN to job",
    "input": {
      "selectColumns": ["application.id", "application.status", "job.name", "job.payment_type"],
      "fromTable": "application",
      "joinClauses": [
        {
          "joinOperator": "join",
          "sourceTable": "application",
          "targetTable": "job",
          "relationship": [["job_id", "id"]]
        }
      ]
    },
    "expected": {
      "query": "select application.id, application.status, job.name, job.payment_type\n    from application\n    join job on application.job_id = job.id",
      "values": []
    }
  },
  {
    "testName": "building select query for application with multiple JOINs",
    "input": {
      "selectColumns": ["application.id", "user.first_name", "user.email", "job.name"],
      "fromTable": "application",
      "joinClauses": [
        {
          "joinOperator": "join",
          "sourceTable": "application",
          "targetTable": "user",
          "relationship": [["user_id", "id"]]
        },
        {
          "joinOperator": "join",
          "sourceTable": "application",
          "targetTable": "job",
          "relationship": [["job_id", "id"]]
        }
      ]
    },
    "expected": {
      "query": "select application.id, user.first_name, user.email, job.name\n    from application\n    join user on application.user_id = user.id join job on application.job_id = job.id",
      "values": []
    }
  },
  {
    "testName": "building select query for application with WHERE and JOIN",
    "input": {
      "selectColumns": ["application.id", "application.status", "user.email"],
      "fromTable": "application",
      "joinClauses": [
        {
          "joinOperator": "join",
          "sourceTable": "application",
          "targetTable": "user",
          "relationship": [["user_id", "id"]]
        }
      ],
      "whereClause": [
        {
          "tableName": "application",
          "column": "status",
          "filter": "=",
          "value": "IN_PROGRESS"
        },
        {
          "tableName": "user",
          "column": "email",
          "filter": "like",
          "value": "%@example.com"
        }
      ]
    },
    "expected": {
      "query": "select application.id, application.status, user.email\n    from application\n    join user on application.user_id = user.id\n    where application.status = $1 and user.email like $2",
      "values": ["IN_PROGRESS", "%@example.com"]
    }
  },
  {
    "testName": "building select query for application with WHERE, JOIN and ORDER BY",
    "input": {
      "selectColumns": ["application.id", "application.applied_on", "job.name"],
      "fromTable": "application",
      "joinClauses": [
        {
          "joinOperator": "join",
          "sourceTable": "application",
          "targetTable": "job",
          "relationship": [["job_id", "id"]]
        }
      ],
      "whereClause": [
        {
          "tableName": "application",
          "column": "status",
          "filter": "=",
          "value": "SUBMITTED"
        }
      ],
      "orderBy": [
        {
          "tableName": "application",
          "column": "applied_on",
          "orderOption": "desc"
        }
      ]
    },
    "expected": {
      "query": "select application.id, application.applied_on, job.name\n    from application\n    join job on application.job_id = job.id\n    where application.status = $1\n    \n    order by application.applied_on desc",
      "values": ["SUBMITTED"]
    }
  }
]

