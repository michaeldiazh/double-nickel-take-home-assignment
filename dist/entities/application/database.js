"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.insertApplicationRowSchema = exports.simplifiedApplicationDomainKeyToTableKey = exports.applicationDomainKeyToTableKey = exports.applicationRowSchema = exports.simplifiedApplicationRowSchema = exports.simplifiedApplicationRowShape = void 0;
const zod_1 = require("zod");
const database_1 = require("../user/database");
const database_2 = require("../job/database");
const enums_1 = require("../enums");
/**
 * Simplified application row shape - base fields in snake_case (includes id, excludes timestamps)
 * Database row equivalent of SimplifiedApplication
 */
exports.simplifiedApplicationRowShape = {
    id: zod_1.z.uuidv4(),
    user_id: zod_1.z.uuidv4(),
    job_id: zod_1.z.uuidv4(),
    applied_on: zod_1.z.date(),
    status: enums_1.applicationStatusSchema,
};
/**
 * Simplified application row schema (snake_case, includes id, excludes timestamps)
 * Database row equivalent of SimplifiedApplication
 */
exports.simplifiedApplicationRowSchema = zod_1.z.object(exports.simplifiedApplicationRowShape);
/**
 * Database row schema for application table (snake_case)
 * Used for validating data coming from the database
 */
exports.applicationRowSchema = exports.simplifiedApplicationRowSchema.extend({
    created_at: zod_1.z.date(),
    updated_at: zod_1.z.date(),
});
exports.applicationDomainKeyToTableKey = {
    id: 'id',
    appliedOn: 'applied_on',
    status: 'status',
    user: database_1.simplifiedUserDomainKeyToTableKey,
    job: database_2.simplifiedJobDomainKeyToTableKey,
    createdAt: 'created_at',
    updatedAt: 'updated_at',
};
exports.simplifiedApplicationDomainKeyToTableKey = {
    id: 'id',
    userId: 'user_id',
    jobId: 'job_id',
    appliedOn: 'applied_on',
    status: 'status',
};
/**
 * Database row schema for inserting a new application (snake_case)
 * Excludes id and timestamps which are generated by the database
 */
exports.insertApplicationRowSchema = zod_1.z.object({
    user_id: zod_1.z.uuidv4(),
    job_id: zod_1.z.uuidv4(),
    applied_on: zod_1.z.date().optional(),
    status: enums_1.applicationStatusSchema.optional(),
});
