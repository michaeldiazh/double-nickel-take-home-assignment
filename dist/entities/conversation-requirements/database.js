"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.insertConversationRequirementsRowSchema = exports.conversationRequirementsDomainKeyToTableKey = exports.conversationRequirementsRowSchema = void 0;
const zod_1 = require("zod");
const enums_1 = require("../enums");
const conversation_1 = require("../conversation");
const job_requirements_1 = require("../job-requirements");
/**
 * Database row schema for conversation_requirements table (snake_case)
 * Used for validating data coming from the database
 */
exports.conversationRequirementsRowSchema = zod_1.z.object({
    conversation_id: zod_1.z.uuidv4(),
    requirement_id: zod_1.z.uuidv4(),
    message_id: zod_1.z.uuidv4().nullable(),
    status: enums_1.requirementStatusSchema,
    value: zod_1.z.record(zod_1.z.string(), zod_1.z.unknown()).nullable(),
    last_updated: zod_1.z.date(),
    created_at: zod_1.z.date(),
});
exports.conversationRequirementsDomainKeyToTableKey = {
    id: "id",
    conversation: conversation_1.conversationDomainKeyToTableKey,
    jobRequirements: job_requirements_1.jobRequirementsDomainKeyToTableKey,
    messageId: 'message_id',
    status: 'status',
    value: 'value',
    lastUpdated: 'last_updated',
    createdAt: 'created_at'
};
/**
 * Database row schema for inserting a new conversation requirement (snake_case)
 * Excludes timestamps which are generated by the database
 */
exports.insertConversationRequirementsRowSchema = zod_1.z.object({
    conversation_id: zod_1.z.uuidv4(),
    requirement_id: zod_1.z.uuidv4(),
    message_id: zod_1.z.uuidv4().nullable().optional(),
    status: enums_1.requirementStatusSchema.optional(),
    value: zod_1.z.record(zod_1.z.string(), zod_1.z.unknown()).nullable().optional(),
});
