"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.insertAddressRowSchema = exports.domainToDatabaseKey = exports.addressDomainKeyToTableKey = exports.addressRowSchema = exports.simplifiedAddressRowSchema = exports.simplifiedAddressRowShape = void 0;
const zod_1 = require("zod");
const domain_1 = require("./domain");
/**
 * Simplified address row shape - base fields in snake_case (includes id, excludes timestamps)
 * Database row equivalent of SimplifiedAddress
 */
exports.simplifiedAddressRowShape = {
    id: zod_1.z.uuidv4(),
    city: zod_1.z.string(),
    address: zod_1.z.string().nullable(),
    apt_number: zod_1.z.string().nullable(),
    state: zod_1.z.string().max(2).nullable(),
    zip_code: zod_1.z.string().nullable(),
};
/**
 * Simplified address row schema (snake_case, includes id, excludes timestamps)
 * Database row equivalent of SimplifiedAddress
 */
exports.simplifiedAddressRowSchema = zod_1.z.object(exports.simplifiedAddressRowShape);
/**
 * Database row schema for address table (snake_case)
 * Used for validating data coming from the database
 */
exports.addressRowSchema = exports.simplifiedAddressRowSchema.extend({
    created_at: zod_1.z.date(),
    updated_at: zod_1.z.date(),
});
exports.addressDomainKeyToTableKey = {
    id: 'id',
    address: 'address',
    city: 'city',
    aptNumber: 'apt_number',
    state: 'state',
    zipCode: 'zip_code',
    createdAt: 'created_at',
    updatedAt: 'updated_at',
};
const domainToDatabaseKey = (key, translator) => {
    const domainKey = domain_1.addressSchema.keyof().parse(key);
    return translator[domainKey];
};
exports.domainToDatabaseKey = domainToDatabaseKey;
/**
 * Database row schema for inserting a new address (snake_case)
 * Excludes id and timestamps which are generated by the database
 */
exports.insertAddressRowSchema = zod_1.z.object({
    address: zod_1.z.string().nullable(),
    apt_number: zod_1.z.string().nullable(),
    state: zod_1.z.string().max(2).nullable(),
    zip_code: zod_1.z.string().nullable(),
});
