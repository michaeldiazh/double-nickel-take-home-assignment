"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.insertConversationRowSchema = exports.simplifiedConversationDomainKeyToTableKey = exports.conversationDomainKeyToTableKey = exports.conversationRowSchema = exports.simplifiedConversationRowSchema = exports.simplifiedConversationRowShape = void 0;
const zod_1 = require("zod");
const database_1 = require("../application/database");
const enums_1 = require("../enums");
/**
 * Simplified conversation row shape - base fields in snake_case (includes id, excludes timestamps)
 * Database row equivalent of SimplifiedConversation
 */
exports.simplifiedConversationRowShape = {
    id: zod_1.z.uuidv4(),
    app_id: zod_1.z.uuidv4(),
    is_active: zod_1.z.boolean(),
    screening_decision: enums_1.screeningDecisionSchema,
    screening_summary: zod_1.z.string().nullable(),
    screening_reasons: zod_1.z.record(zod_1.z.string(), zod_1.z.unknown()).nullable(),
    ended_at: zod_1.z.date().nullable(),
};
/**
 * Simplified conversation row schema (snake_case, includes id, excludes timestamps)
 * Database row equivalent of SimplifiedConversation
 */
exports.simplifiedConversationRowSchema = zod_1.z.object(exports.simplifiedConversationRowShape);
/**
 * Database row schema for conversation table (snake_case)
 * Used for validating data coming from the database
 */
exports.conversationRowSchema = exports.simplifiedConversationRowSchema.extend({
    created_at: zod_1.z.date(),
    updated_at: zod_1.z.date(),
});
exports.conversationDomainKeyToTableKey = {
    id: 'id',
    isActive: 'is_active',
    screeningDecision: 'screening_decision',
    screeningSummary: 'screening_summary',
    screeningReasons: 'screening_reasons',
    endedAt: 'ended_at',
    application: database_1.simplifiedApplicationDomainKeyToTableKey,
    createdAt: 'created_at',
    updatedAt: 'updated_at',
};
exports.simplifiedConversationDomainKeyToTableKey = {
    id: 'id',
    appId: 'app_id',
    isActive: 'is_active',
    screeningDecision: 'screening_decision',
    screeningSummary: 'screening_summary',
    screeningReasons: 'screening_reasons',
    endedAt: 'ended_at',
};
/**
 * Database row schema for inserting a new conversation (snake_case)
 * Excludes id and timestamps which are generated by the database
 */
exports.insertConversationRowSchema = zod_1.z.object({
    app_id: zod_1.z.uuidv4(),
    is_active: zod_1.z.boolean().optional(),
    screening_decision: enums_1.screeningDecisionSchema.optional(),
    screening_summary: zod_1.z.string().nullable().optional(),
    screening_reasons: zod_1.z.record(zod_1.z.string(), zod_1.z.unknown()).nullable().optional(),
    ended_at: zod_1.z.date().nullable().optional(),
});
